/*
 * LSM TUI Styles - Agents Screen
 */

/* ============================================================================
 * Agents Screen Specific
 * ============================================================================ */

#agents-layout {
    height: 100%;
    width: 100%;
    layout: vertical;
    overflow: hidden;
}

#agents-top {
    height: 1fr;
    layout: horizontal;
    overflow: hidden;
}

#agents-left {
    width: 1fr;
    min-width: 34;
    max-width: 48%;
    layout: vertical;
    overflow-y: auto;
    overflow-x: hidden;
    padding-right: 1;
}

/* --- Log panel (right side) --- */

#agents-log-panel {
    width: 2fr;
    min-width: 44;
    padding: 1;
    border: round $primary-darken-2;
    background: $surface-darken-1;
    layout: vertical;
}

#agents-log-scroll {
    height: 1fr;
}

#agents-log-header {
    layout: horizontal;
    height: auto;
    margin-bottom: 1;
}

#agents-log-header .agents-section-title {
    width: 1fr;
    margin-bottom: 0;
}

#agents-log-follow-toggle-button {
    width: auto;
    min-width: 14;
}

#agents-log {
    height: 1fr;
    background: $surface;
    border: round $primary-darken-1;
    padding: 1;
    text-wrap: wrap;
    overflow-x: hidden;
    overflow-y: auto;
}

/* --- Left-side panels (shared base) --- */

#agents-control-panel,
#agents-running-panel,
#agents-interaction-panel,
#agents-status-panel,
#agents-meta-panel,
#agents-schedule-panel,
#agents-memory-panel {
    height: auto;
    margin-bottom: 1;
    padding: 0 1;
    border: round $primary-darken-2;
    background: $surface-darken-1;
    layout: vertical;
}

#agents-interaction-panel {
    display: none;
}

/* --- Section titles --- */

.agents-section-title {
    color: $primary;
    text-style: bold;
    margin-bottom: 1;
}

.agents-panel-header {
    layout: horizontal;
    width: 100%;
    height: auto;
    align-vertical: middle;
}

.agents-panel-header .agents-section-title {
    width: 1fr;
    margin-bottom: 0;
}

.agents-label {
    color: $text-muted;
}

/* --- Form-level inputs/selects (bottom margin for spacing) ---
 * Target the specific panels that contain form fields, NOT the
 * refresh-interval rows which need tight spacing. */

#agents-control-panel Input,
#agents-control-panel Select,
#agents-schedule-panel > Input,
#agents-schedule-panel > Select,
#agents-memory-panel Input,
#agents-memory-panel Select,
#agents-interaction-panel > Input {
    margin: 0 0 1 0;
}

/* --- Refresh controls (running + interaction) --- */

#agents-running-refresh-controls,
#agents-interaction-refresh-controls {
    layout: horizontal;
    width: 100%;
    height: auto;
    margin-bottom: 0;
}

#agents-running-refresh-controls Button,
#agents-interaction-refresh-controls Button {
    width: auto;
    min-width: 6;
    margin-right: 1;
}

#agents-running-refresh-controls Button:last-child,
#agents-interaction-refresh-controls Button:last-child {
    margin-right: 0;
}

#agents-clear-unread-button {
    min-width: 6;
}

/* --- Refresh interval rows --- */

#agents-running-refresh-interval-row,
#agents-interaction-refresh-interval-row {
    layout: vertical;
    width: 100%;
    height: auto;
    margin-bottom: 0;
}

.agents-refresh-interval-label {
    margin: 0;
}

#agents-running-refresh-interval-select,
#agents-interaction-refresh-interval-select {
    width: 1fr;
    min-width: 8;
    margin: 0 0 1 0;
}

/* --- Status outputs --- */

#agents-status-output,
#agents-running-output,
#agents-interaction-status-output,
#agents-meta-output,
#agents-meta-artifacts-output,
#agents-schedule-output,
#agents-memory-output {
    min-height: 1;
}

/* --- Data tables --- */

#agents-running-table {
    height: 7;
    min-height: 5;
    margin-bottom: 1;
    border: round $primary-darken-2;
    background: $surface;
}

#agents-meta-task-table,
#agents-meta-runs-table,
#agents-schedule-table {
    height: 8;
    min-height: 6;
    margin-bottom: 1;
    border: round $primary-darken-2;
    background: $surface;
}

#agents-left DataTable {
    color: $text;
}

#agents-running-table:focus,
#agents-meta-task-table:focus,
#agents-meta-runs-table:focus,
#agents-schedule-table:focus {
    border: round $primary;
}

/* --- Interaction indicator --- */

#agents-interaction-indicator {
    width: auto;
    margin-left: 1;
    color: $text-muted;
}

/* --- Button groups --- */

#agents-buttons,
#agents-interaction-buttons,
#agents-schedule-buttons,
#agents-memory-buttons,
#agents-meta-buttons {
    layout: vertical;
    height: auto;
    margin-top: 1;
}

#agents-meta-buttons {
    layout: horizontal;
}

.agents-button-row {
    layout: horizontal;
    height: auto;
    margin-bottom: 1;
}

.agents-button-row Button {
    width: 1fr;
    min-width: 0;
    margin-right: 1;
}

.agents-button-row Button:last-child {
    margin-right: 0;
}

#agents-meta-buttons Button {
    width: 1fr;
    min-width: 0;
}

/* --- Interaction panel active state --- */

.agents-interaction-panel-active {
    border: round $warning;
    background: $surface-darken-1;
}

.agents-interaction-indicator-active {
    color: $warning;
    text-style: bold;
}

#agents-interaction-type,
#agents-interaction-agent,
#agents-interaction-tool,
#agents-interaction-risk,
#agents-interaction-reason,
#agents-interaction-args,
#agents-interaction-prompt {
    color: $text-muted;
    margin-bottom: 1;
}
