{
  "_comment": "Local Second Mind Configuration",

  "_comment_global": "Global settings shared across multiple modules",
  "global": {
    "global_folder": "C:\\Users\\User\\Local Second Mind",
    "embed_model": "sentence-transformers/all-MiniLM-L6-v2",
    "device": "cpu",
    "batch_size": 32
  },

  "_comment_ingest": "Ingest pipeline configuration",
  "ingest": {
    "roots": [
      "C:\\Users\\User\\Documents",
      "D:\\Writings"
    ],
    "persist_dir": ".chroma",
    "collection": "local_kb",
    "chroma_flush_interval": 2000,
    "manifest": ".ingest/manifest.json",
    "chunk_size": 1800,
    "chunk_overlap": 200,
    "enable_ocr": false,
    "enable_ai_tagging": false,
    "tagging_model": "gpt-5.2",
    "tags_per_chunk": 3,
    "dry_run": false,
    "skip_errors": true,
    "extensions": [".txt", ".md", ".rst", ".pdf", ".docx", ".html", ".htm"],
    "override_extensions": false,
    "exclude_dirs": [".cache", "node_modules", "__pycache__"],
    "override_excludes": false
  },

  "_comment_storage": "Vector database configuration",
  "vectordb": {
    "provider": "chromadb",
    "persist_dir": ".chroma",
    "collection": "local_kb",
    "chroma_hnsw_space": "cosine"
  },

  "_comment_llm": "LLM configuration. Providers define connections; services map features to provider+model.",
  "llms": {
    "_comment_providers": "Provider connections. API keys can be omitted and provided via .env instead.",
    "providers": [
      { "provider_name": "openai", "api_key": "INSERT_YOUR_OPENAI_API_KEY" },
      { "provider_name": "gemini", "api_key": "INSERT_YOUR_GEMINI_API_KEY" },
      { "provider_name": "claude", "api_key": "INSERT_YOUR_CLAUDE_API_KEY" }
    ],
    "_comment_services": "Named services mapping features to a provider + model. 'default' is the fallback.",
    "services": {
      "default": { "provider": "openai", "model": "gpt-5.2" },
      "query":   { "provider": "openai", "model": "gpt-5.2", "temperature": 0.7, "max_tokens": 2000 },
      "tagging": { "provider": "gemini", "model": "gemini-2.5-flash-lite", "temperature": 0.5, "max_tokens": 200 },
      "ranking": { "provider": "claude", "model": "claude-haiku-4-5", "temperature": 0.3, "max_tokens": 500 }
    }
  },

  "_comment_query": "Query pipeline configuration",
  "query": {
    "mode": "grounded",
    "k": 12,
    "retrieve_k": null,
    "min_relevance": 0.25,
    "k_rerank": 6,
    "rerank_strategy": "hybrid",
    "no_rerank": false,
    "local_pool": null,
    "max_per_file": 2,

    "_comment_filters": "Optional query filters (can be overridden per-session in REPL)",
    "path_contains": null,
    "ext_allow": null,
    "ext_deny": null
  },

  "_comment_notes": "Global notes configuration (applies across all modes)",
  "notes": {
    "enabled": true,
    "dir": "notes",
    "template": "default",
    "filename_format": "timestamp",
    "integration": "none",
    "wikilinks": false,
    "backlinks": false,
    "include_tags": false
  },

  "_comment_modes": "Query mode definitions (grounded/insight/hybrid built-in, add custom modes here)",
  "modes": [
    {
      "_comment": "General research mode with basic providers",
      "name": "research",
      "synthesis_style": "grounded",
      "source_policy": {
        "local": {
          "min_relevance": 0.20,
          "k": 15,
          "k_rerank": 8
        },
        "remote": {
          "enabled": true,
          "rank_strategy": "weighted",
          "max_results": 10,
          "remote_providers": [
            "brave",
            "wikipedia",
            "arxiv"
          ]
        },
        "model_knowledge": {
          "enabled": true,
          "require_label": true
        }
      }
    },
    {
      "_comment": "STEM research with inline weight overrides - prioritizes academic sources",
      "name": "stem_research",
      "synthesis_style": "grounded",
      "source_policy": {
        "local": {
          "min_relevance": 0.25,
          "k": 12,
          "k_rerank": 6
        },
        "remote": {
          "enabled": true,
          "rank_strategy": "weighted",
          "max_results": 15,
          "remote_providers": [
            {"source": "arxiv", "weight": 0.95},
            {"source": "semantic_scholar", "weight": 0.9},
            {"source": "openalex", "weight": 0.85},
            {"source": "wikipedia", "weight": 0.5}
          ]
        },
        "model_knowledge": {
          "enabled": true,
          "require_label": true
        }
      }
    },
    {
      "_comment": "Humanities research - philosophy, theology, religious studies",
      "name": "humanities_research",
      "synthesis_style": "grounded",
      "source_policy": {
        "local": {
          "min_relevance": 0.20,
          "k": 15,
          "k_rerank": 8
        },
        "remote": {
          "enabled": true,
          "rank_strategy": "weighted",
          "max_results": 12,
          "remote_providers": [
            {"source": "philpapers", "weight": 0.95},
            {"source": "ixtheo", "weight": 0.9},
            {"source": "openalex", "weight": 0.75},
            {"source": "crossref", "weight": 0.7},
            {"source": "wikipedia", "weight": 0.5}
          ]
        },
        "model_knowledge": {
          "enabled": true,
          "require_label": true
        }
      }
    }
  ],

  "_comment_remote_providers": "Remote source providers (web search, APIs, etc.). API keys can be omitted and provided via .env instead.",
  "remote_providers": [
    {
      "name": "brave",
      "type": "web_search",
      "weight": 1.0,
      "api_key": "INSERT_YOUR_BRAVE_API_KEY",
      "max_results": 5
    },
    {
      "name": "wikipedia",
      "type": "wikipedia",
      "weight": 0.7,
      "language": "en",
      "user_agent": "LocalSecondMind/1.0 (contact: you@example.com)",
      "max_results": 5,
      "min_interval_seconds": 1.0,
      "section_limit": 2,
      "snippet_max_chars": 600,
      "include_disambiguation": false
    },
    {
      "name": "arxiv",
      "type": "arxiv",
      "weight": 0.9,
      "user_agent": "LocalSecondMind/1.0 (contact: you@example.com)",
      "max_results": 5,
      "min_interval_seconds": 3.0,
      "sort_by": "relevance",
      "sort_order": "descending",
      "categories": [
        "cs.AI",
        "cs.LG"
      ]
    },
    {
      "name": "semantic_scholar",
      "type": "semantic_scholar",
      "weight": 0.9,
      "api_key": "INSERT_YOUR_SEMANTIC_SCHOLAR_API_KEY",
      "max_results": 5,
      "min_interval_seconds": 1.0,
      "snippet_max_chars": 700,
      "fields_of_study": [],
      "year_range": null,
      "open_access_only": false
    },
    {
      "name": "core",
      "type": "core",
      "weight": 0.8,
      "api_key": "INSERT_YOUR_CORE_API_KEY",
      "max_results": 5,
      "min_interval_seconds": 1.0,
      "snippet_max_chars": 700,
      "repository_ids": [],
      "year_from": null,
      "year_to": null,
      "full_text_only": false,
      "language": null
    },
    {
      "_comment": "PhilPapers - philosophy papers and research",
      "name": "philpapers",
      "type": "philpapers",
      "weight": 0.9,
      "api_id": "INSERT_YOUR_PHILPAPERS_API_ID",
      "api_key": "INSERT_YOUR_PHILPAPERS_API_KEY",
      "max_results": 5,
      "min_interval_seconds": 2.0,
      "snippet_max_chars": 700,
      "subject_categories": [],
      "include_books": true,
      "open_access_only": false
    },
    {
      "_comment": "IxTheo - theology and religious studies",
      "name": "ixtheo",
      "type": "ixtheo",
      "weight": 0.9,
      "max_results": 5,
      "min_interval_seconds": 1.0,
      "snippet_max_chars": 700,
      "language": "en",
      "traditions": [],
      "search_type": "all",
      "include_reviews": true,
      "year_from": null,
      "year_to": null
    },
    {
      "_comment": "OpenAlex - comprehensive academic database (free, no API key required)",
      "name": "openalex",
      "type": "openalex",
      "weight": 1.0,
      "email": "you@example.com",
      "max_results": 5,
      "min_interval_seconds": 0.1,
      "snippet_max_chars": 700,
      "year_from": null,
      "year_to": null,
      "open_access_only": false,
      "type_filter": null,
      "concepts": []
    },
    {
      "_comment": "Crossref - DOI metadata and bibliographic search (free, no API key required)",
      "name": "crossref",
      "type": "crossref",
      "weight": 0.9,
      "email": "you@example.com",
      "max_results": 5,
      "min_interval_seconds": 0.5,
      "snippet_max_chars": 700,
      "year_from": null,
      "year_to": null,
      "type_filter": null,
      "has_full_text": false,
      "has_references": false,
      "has_orcid": false
    },
    {
      "_comment": "OAI-PMH - Generic harvester for institutional repositories (free, no API key required)",
      "name": "oai_pmh",
      "type": "oai_pmh",
      "weight": 0.8,
      "_comment_repository": "Use a known repository key (arxiv, zenodo, pubmed, doaj, hal, repec, europeana, philpapers) or a custom URL",
      "repository": "zenodo",
      "max_results": 5,
      "min_interval_seconds": 1.0,
      "snippet_max_chars": 700,
      "metadata_prefix": "oai_dc",
      "set_spec": null,
      "user_agent": "LocalSecondMind/1.0 (contact: you@example.com)"
    },
    {
      "_comment": "OAI-PMH Multi-Repository - Search across multiple OAI-PMH repositories",
      "name": "oai_pmh_multi",
      "type": "oai_pmh",
      "weight": 0.8,
      "repositories": ["zenodo", "doaj", "hal"],
      "max_results": 5,
      "min_interval_seconds": 1.0,
      "snippet_max_chars": 700
    }
  ]
}
